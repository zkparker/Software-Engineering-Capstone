<!DOCTYPE html>

<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head>
<meta charset="UTF-8" />
<title>El Espada</title>

<!-- Boot strap link with thmyeleaf so that it is dynamic-->
<link rel="stylesheet" href="../static/css/bootstrap.min.css"
	th:href="@{/css/bootstrap.min.css}" />

<link rel="stylesheet" href="../static/css/stylesheet.css"
	th:href="@{/css/stylesheet.css}" />
	
<script>
	function togglePayment(){
		if(document.getElementById("card").checked == true){
			document.getElementById("cardDetails").style.display = "block";
			document.getElementById("cc-name").required = true;
			document.getElementById("cc-number").required = true;
			document.getElementById("cc-expiration").required = true;
			document.getElementById("cc-cvv").required = true;
		}else {
			document.getElementById("cardDetails").style.display = "none";
			document.getElementById("cc-name").required = false;
			document.getElementById("cc-number").required = false;
			document.getElementById("cc-expiration").required = false;
			document.getElementById("cc-cvv").required = false;
		}
	}
</script>

</head>



<body>
	<div class="container" style="border-bottom: none">
		<!-- Utilize thymeleaf fragment for nav bar so the contents only need to be changed in one place -->
		<nav class="navbar navbar-expand-md navbar-dark bg-dark navigation sticky-top"
			th:replace="fragments/navigator :: navigator"></nav>

		<div class="row justify-content-md-center" style="border-bottom: none">
			<div class="mbr-white col-md-10">
				<h2 class="mbr-section-subtitle text-center mbr-light pb-3 mbr-fonts-style display-2">Checkout</h2>
				<div class="container">
					<div class="row justify-content-md-center">
						<div class="row justify-content-md-center"
							style="border-bottom: none">
							Order Id:<label th:text="${session.orderId}" th:unless="${session == null}" />
							Order Total:<label th:text="${session.orderTotal}" th:unless="${session == null}" />

							<form th:action="@{/final}" method="post" class="was-validated" th:object="${paymentVO}">
								<div class="row">
									<div class="col-sm">
										<label for="validationTextarea">First name</label> 
										<input type="text" class="form-control" id="firstName" placeholder="John"
											th:value="${paymentVO.firstName}" th:name="firstName" required>
										<div class="invalid-feedback">Valid first name is required.</div>
									</div>
									<div class="col-sm">
										<label for="lastName">Last name</label> 
										<input type="text" class="form-control" id="lastName" placeholder="Doe" 
											th:value="${paymentVO.lastName}" th:name="lastName" required>
										<div class="invalid-feedback">Valid last name is required.</div>
									</div>
								</div>

								<div class="row">
									<div class="col-sm">
										<label for="email">Email <span class="text-muted">(Optional)</span></label>
										<input type="email" class="form-control" id="email"
											th:value="${paymentVO.email}" th:name="email">
										<div class="invalid-feedback">Please enter a valid email
											address for shipping updates.</div>

									</div>
								</div>

								<div class="col-sm">
									<label for="address">Address</label> 
									<input type="text" class="form-control" id="address" required
										th:value="${paymentVO.addressStreet}" th:name="addressStreet">
									<div class="invalid-feedback">Please enter your shipping address.</div>
								</div>
								
								<div class="row">
									<div class="col-sm">
										<label for="city">City</label> 
										<input type="text" class="form-control" id="city" placeholder="City" 
											required th:value="${paymentVO.addressCity}" th:name="addressCity">
										<div class="invalid-feedback">City required.</div>
									</div>
									<div class="col-sm">
										<label for="state">State</label> 
										<select class="custom-select d-block w-100" id="state" 
											th:value="${paymentVO.addressState}" th:name="addressState" required>
											<option value="">Choose...</option>
											<option value="AL">Alabama</option>
											<option value="AK">Alaska</option>
											<option value="AZ">Arizona</option>
											<option value="AR">Arkansas</option>
											<option value="CA">California</option>
											<option value="CO">Colorado</option>
											<option value="CT">Connecticut</option>
											<option value="DE">Delaware</option>
											<option value="DC">District Of Columbia</option>
											<option value="FL">Florida</option>
											<option value="GA">Georgia</option>
											<option value="HI">Hawaii</option>
											<option value="ID">Idaho</option>
											<option value="IL">Illinois</option>
											<option value="IN">Indiana</option>
											<option value="IA">Iowa</option>
											<option value="KS">Kansas</option>
											<option value="KY">Kentucky</option>
											<option value="LA">Louisiana</option>
											<option value="ME">Maine</option>
											<option value="MD">Maryland</option>
											<option value="MA">Massachusetts</option>
											<option value="MI">Michigan</option>
											<option value="MN">Minnesota</option>
											<option value="MS">Mississippi</option>
											<option value="MO">Missouri</option>
											<option value="MT">Montana</option>
											<option value="NE">Nebraska</option>
											<option value="NV">Nevada</option>
											<option value="NH">New Hampshire</option>
											<option value="NJ">New Jersey</option>
											<option value="NM">New Mexico</option>
											<option value="NY">New York</option>
											<option value="NC">North Carolina</option>
											<option value="ND">North Dakota</option>
											<option value="OH">Ohio</option>
											<option value="OK">Oklahoma</option>
											<option value="OR">Oregon</option>
											<option value="PA">Pennsylvania</option>
											<option value="RI">Rhode Island</option>
											<option value="SC">South Carolina</option>
											<option value="SD">South Dakota</option>
											<option value="TN">Tennessee</option>
											<option value="TX">Texas</option>
											<option value="UT">Utah</option>
											<option value="VT">Vermont</option>
											<option value="VA">Virginia</option>
											<option value="WA">Washington</option>
											<option value="WV">West Virginia</option>
											<option value="WI">Wisconsin</option>
											<option value="WY">Wyoming</option>
										</select>
										<div class="invalid-feedback">Please provide a valid
											state.</div>
									</div>

									<div class="col-sm">
										<label for="zip">Zip</label> 
										<input type="text" th:value="${paymentVO.addressZip}"
											class="form-control" id="zip" placeholder="12345"
											 th:name="addressZip" required>
										<div class="invalid-feedback">Zip code required.</div>
									</div>
								</div>

								<h4 class="mb-3">Payment Details</h4>

							
								<div class="form-check">
									<input class="form-check-input" type="radio"
										name="payment-type" id="cash" value="CASH"
										th:field="*{paymentType}" onclick="togglePayment();" required> 
									<label class="form-check-label" for="cash"> Cash </label>
								</div>
								<div class="form-check">
									<input class="form-check-input" type="radio"
										name="payment-type" id="card" value="CARD" 
										checked th:field="*{paymentType}"  onclick="togglePayment();">
									<label class="form-check-label" for="card"> Card </label>
									
								</div>
								
								
								
								<div id="cardDetails" style="display:none;">
									<div class="row">
										<div class="col-sm">
											<label for="cc-name">Name on card</label> <input type="text"
												class="form-control" id="cc-name" placeholder="John Doe"
												required th:value="${paymentVO.nameOnCard}" th:name="nameOnCard"> <small class="text-muted">Full name
												as displayed on card</small>
											<div class="invalid-feedback">Name on card is required</div>
										</div>
										<div class="col-sm">
											<label for="cc-number">Credit card number</label> <input
												type="text" class="form-control" id="cc-number"
												placeholder="1234 5678 9012 3456" required 
												th:value="${paymentVO.cardNumber}" th:name="cardNumber">
											<div class="invalid-feedback">Credit card number is
												required</div>
										</div>
									</div>
									<div class="row" style="border-bottom: none">
										<div class="col-sm">
											<label for="cc-expiration">Expiration Date</label> <input
												type="text" class="form-control" id="cc-expiration"
												placeholder="01/2023" required th:value="${paymentVO.cardExpiry}"
												 th:name="cardExpiry">
											<div class="invalid-feedback">Expiration date required</div>
										</div>
										<div class="col-sm">
											<label for="cc-expiration">CVV</label> <input type="text" th:value="${paymentVO.cvv}"
												class="form-control" id="cc-cvv" placeholder="123"  th:name="cvv"required>
											<div class="invalid-feedback">Security code required</div>
										</div>
	
									</div>
								</div>

								<div class="row" style="border-bottom: none">
									<button class="btn btn-primary btn-lg btn-block" type="submit"
										>Submit Order</button>
								</div>
							</form>

						</div>
					</div>
				</div>
			</div>
		</div>
	</div>

</body>
</html>